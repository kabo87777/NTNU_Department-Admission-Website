services:
  caddy:
    image: "{{ DOCKER_IMAGE }}"
    restart: always
    networks:
      - traefik
    logging:
      driver: "json-file"
      options:
        max-size: "200k"
        max-file: "10"
    labels:
      traefik.enable: "true"
      traefik.http.routers.{{ TRAEFIK_INTERNAL_NAME }}.rule: "Host(`{{ DOMAIN }}`)"
      traefik.http.routers.{{ TRAEFIK_INTERNAL_NAME }}.tls.certResolver: "http"
      traefik.http.services.{{ TRAEFIK_INTERNAL_NAME }}.loadbalancer.server.port: "3000"

networks:
  traefik:
    external: true
